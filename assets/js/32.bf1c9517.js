(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{482:function(_,v,e){"use strict";e.r(v);var l=e(59),t=Object(l.a)({},(function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[e("h1",{attrs:{id:"开销"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开销"}},[_._v("#")]),_._v(" 开销")]),_._v(" "),e("p",[_._v("Access Method")]),_._v(" "),e("ul",[e("li",[_._v("const: 通过主键或者唯一二级索引找单个值")]),_._v(" "),e("li",[_._v("ref: 通过二级索引找单个值(该值可重复)")]),_._v(" "),e("li",[_._v("ref_or_null: 同上, 并找null")]),_._v(" "),e("li",[_._v("range: 范围访问")]),_._v(" "),e("li",[_._v("index: 二级索引的全局遍历, 无回表操作")]),_._v(" "),e("li",[_._v("all: 访问全表")])]),_._v(" "),e("p",[_._v("访问优化")]),_._v(" "),e("ul",[e("li",[e("p",[_._v("MRR: ref时, 不直接回表, 而是选择排序聚簇索引后再进行回表, 可以节省一些随机I/O开销.")])]),_._v(" "),e("li",[e("p",[_._v("索引合并(Union & Intersection): 条件中含两个二级索引, 将两个索引分别查询, 若二级索引记录按主键排序, 取ID(即聚簇索引)并/交集再回表.")]),_._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[_._v("SELECT * FROM single_table where keyl = 'a' AND key3 = 'b';#取交集\nSELECT * FROM single_table where keyl = 'a' AND key3 = 'b';#取并集\n")])])])]),_._v(" "),e("li",[e("p",[_._v("Sort-Union(无Sort-Intersection): 排序后取交集并回表, 仅适用数据量小的时候, 大的时候减少的随机I/O花费的时间可能还不如排序的时间.")])])]),_._v(" "),e("p",[_._v("连接: Join")]),_._v(" "),e("ul",[e("li",[_._v("Join Buffer: 将驱动表的记录的查询列加进去, 每次与被驱动表对比")])]),_._v(" "),e("p",[_._v("查询成本")]),_._v(" "),e("ul",[e("li",[_._v("I/O成本")]),_._v(" "),e("li",[_._v("CPU成本")])]),_._v(" "),e("p",[_._v("页成本1.0, 记录成本0.2, 回表1.0")]),_._v(" "),e("ul",[e("li",[_._v("ref查询成本设置了上限, 在访问记录相同时, 也比range查询有优势, 因为ref访问时二级索引的id离得近, 可以加载多条记录到内存.")]),_._v(" "),e("li",[_._v("index dive: 在索引B+树中找区间左边界和右边界快速计算索引记录条数")])]),_._v(" "),e("p",[_._v("连接查询成本")]),_._v(" "),e("ul",[e("li",[_._v("单次查询驱动表的成本")]),_._v(" "),e("li",[_._v("多次查询被驱动表的成本")])]),_._v(" "),e("p",[_._v("这个过程无法量化只能估计, 这个猜测的过程称为"),e("em",[_._v("Condition Filtering")]),_._v("(条件过滤), 可能用到索引, 可能用到统计数据等等.")]),_._v(" "),e("p",[_._v("两表连接成本")]),_._v(" "),e("ul",[e("li")])])}),[],!1,null,null,null);v.default=t.exports}}]);